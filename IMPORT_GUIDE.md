# üìö –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–º–ø–æ—Ä—Ç—É —Ç–µ—Å—Ç–æ–≤ –≤ Django –ë–î

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∞—à–µ–π –ë–î

### –ú–æ–¥–µ–ª–∏ (core/models.py)

```python
# 1. Subject - –ü—Ä–µ–¥–º–µ—Ç
class Subject(models.Model):
    title = models.CharField(max_length=255)      # "–ó–∞–±–æ–Ω–∏ —Ç–æ“∑–∏–∫”£"
    icon = models.CharField(max_length=255)       # "üìö"
    color = models.CharField(max_length=32)       # "#4CAF50"

# 2. Topic - –¢–µ–º–∞/–ö–∞—Ç–µ–≥–æ—Ä–∏—è
class Topic(models.Model):
    subject = models.ForeignKey(Subject)          # –°–≤—è–∑—å —Å –ø—Ä–µ–¥–º–µ—Ç–æ–º
    title = models.CharField(max_length=255)      # –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    order = models.IntegerField(default=0)        # –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    is_locked = models.BooleanField(default=False)

# 3. Task - –¢–µ—Å—Ç/–ó–∞–¥–∞–Ω–∏–µ
class Task(models.Model):
    subject = models.ForeignKey(Subject)          # –ü—Ä–µ–¥–º–µ—Ç
    topic = models.ForeignKey(Topic)              # –ö–∞—Ç–µ–≥–æ—Ä–∏—è
    question = models.TextField()                 # –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
    options = models.JSONField()                  # –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ (JSON)
    correct_answer = models.CharField()           # "A", "B", "C" –∏–ª–∏ "D"
    difficulty = models.IntegerField(default=1)   # 1-–ª–µ–≥–∫–∏–π, 2-—Å—Ä–µ–¥–Ω–∏–π, 3-—Å–ª–æ–∂–Ω—ã–π
    order = models.IntegerField(default=0)        # –ü–æ—Ä—è–¥–æ–∫
```

## üìä –ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö

### –ò–∑ –≤–∞—à–∏—Ö JSON —Ñ–∞–π–ª–æ–≤ ‚Üí –í Django –º–æ–¥–µ–ª–∏

```
test_database_clean.json + answer_keys.json
    ‚Üì
Subject: "–ó–∞–±–æ–Ω–∏ —Ç–æ“∑–∏–∫”£" (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    ‚Üì
Topics: –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ —Ç–µ—Å—Ç–æ–≤
    - "–õ–ï–ö–°–ò–ö–ê. –§–†–ê–ó–ï–û–õ–û–ì–ò–Ø" (781 —Ç–µ—Å—Ç)
    - "–ò–ú–õ–û. –õ–ï–ö–°–ò–ö–ê. –§–†–ê–ó–ï–û–õ–û–ì–ò–Ø" (230 —Ç–µ—Å—Ç–æ–≤)
    - "–°–ê–í–û–õ–£ –ú–ê–°–™–ê–õ–ê“≤–û –ë–û –ò–ù–¢–ò–•–û–ë–ò –Ø–ö “∂–ê–í–û–ë–ò –î–£–†–£–°–¢" (138 —Ç–µ—Å—Ç–æ–≤)
    - "–ù–ê–ú–£–ù–ê–ò –°–£–ë–¢–ï–°–¢–ò –ó–ê–ë–û–ù–ò –¢–û“∂–ò–ö”¢" (25 —Ç–µ—Å—Ç–æ–≤)
    ‚Üì
Tasks: –¢–µ—Å—Ç—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤
```

### –§–æ—Ä–º–∞—Ç options (JSONField)

```json
{
  "A": "—Å–∞“≥—Ä–æ",
  "B": "–∏–º—Ä”Ø–∑",
  "C": "–±–µ—Ä—É–Ω",
  "D": "—Å”Ø–∑–∞–Ω"
}
```

–î–ª—è matching –≤–æ–ø—Ä–æ—Å–æ–≤:
```json
{
  "A": "–≤–∞—Ä–∏–∞–Ω—Ç A",
  "B": "–≤–∞—Ä–∏–∞–Ω—Ç B",
  "C": "–≤–∞—Ä–∏–∞–Ω—Ç C",
  "D": "–≤–∞—Ä–∏–∞–Ω—Ç D",
  "matching": {
    "left": {
      "1": "—Ç–µ–∫—Å—Ç 1",
      "2": "—Ç–µ–∫—Å—Ç 2",
      "3": "—Ç–µ–∫—Å—Ç 3",
      "4": "—Ç–µ–∫—Å—Ç 4"
    },
    "right": {
      "A": "–æ—Ç–≤–µ—Ç A",
      "B": "–æ—Ç–≤–µ—Ç B",
      "C": "–æ—Ç–≤–µ—Ç C",
      "D": "–æ—Ç–≤–µ—Ç D"
    }
  }
}
```

## üöÄ –ò–º–ø–æ—Ä—Ç –≤ –ë–î

### –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /home/osimi/–†–∞–±–æ—á–∏–π\ —Å—Ç–æ–ª/projects/hushyor

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞
python3 import_to_django.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:**
1. ‚úÖ –°–æ–∑–¥–∞–µ—Ç Subject "–ó–∞–±–æ–Ω–∏ —Ç–æ“∑–∏–∫”£" (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
2. ‚úÖ –°–æ–∑–¥–∞–µ—Ç Topics –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–µ—Å—Ç–æ–≤
3. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã –∫–∞–∫ Tasks
4. ‚úÖ –°–≤—è–∑—ã–≤–∞–µ—Ç —Ç–µ—Å—Ç—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
5. ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
6. ‚úÖ –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã –±–µ–∑ –æ—Ç–≤–µ—Ç–æ–≤

### –°–ø–æ—Å–æ–± 2: Django Management Command

–°–æ–∑–¥–∞–π—Ç–µ `core/management/commands/import_tests.py`:

```python
from django.core.management.base import BaseCommand
from core.models import Subject, Topic, Task
import json

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç —Ç–µ—Å—Ç–æ–≤ –∏–∑ JSON —Ñ–∞–π–ª–æ–≤'

    def handle(self, *args, **options):
        # –ö–æ–¥ –∏–º–ø–æ—Ä—Ç–∞ –∑–¥–µ—Å—å
        self.stdout.write(self.style.SUCCESS('–ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω'))
```

–ó–∞–ø—É—Å–∫:
```bash
python manage.py import_tests
```

### –°–ø–æ—Å–æ–± 3: Django Shell

```bash
python manage.py shell
```

```python
import json
from core.models import Subject, Topic, Task

# –°–æ–∑–¥–∞–µ–º Subject
subject = Subject.objects.create(
    title="–ó–∞–±–æ–Ω–∏ —Ç–æ“∑–∏–∫”£",
    icon="üìö",
    color="#4CAF50"
)

# –°–æ–∑–¥–∞–µ–º Topic
topic = Topic.objects.create(
    subject=subject,
    title="–õ–ï–ö–°–ò–ö–ê. –§–†–ê–ó–ï–û–õ–û–ì–ò–Ø",
    order=0
)

# –°–æ–∑–¥–∞–µ–º Task
task = Task.objects.create(
    subject=subject,
    topic=topic,
    question="–î–∞—Ä –∫–∞–¥–æ–º –∫–∞–ª–∏–º–∞ –∑–∞–¥–∞ –¥–∞—Ä “≥–∏“∑–æ–∏ –∞–≤–≤–∞–ª –º–µ–æ—è–¥?",
    options={
        "A": "—Å–∞“≥—Ä–æ",
        "B": "–∏–º—Ä”Ø–∑",
        "C": "–±–µ—Ä—É–Ω",
        "D": "—Å”Ø–∑–∞–Ω"
    },
    correct_answer="D",
    difficulty=1,
    order=1
)
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –±—É–¥–µ—Ç:
- **1 Subject**: "–ó–∞–±–æ–Ω–∏ —Ç–æ“∑–∏–∫”£"
- **4 Topics**: –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- **~1159 Tasks**: –¢–µ—Å—Ç—ã —Å –æ—Ç–≤–µ—Ç–∞–º–∏ (15 –±–µ–∑ –æ—Ç–≤–µ—Ç–æ–≤ –ø—Ä–æ–ø—É—â–µ–Ω—ã)

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:
- **–õ–µ–≥–∫–∏–π (1)**: –õ–ï–ö–°–ò–ö–ê. –§–†–ê–ó–ï–û–õ–û–ì–ò–Ø
- **–°—Ä–µ–¥–Ω–∏–π (2)**: –ò–ú–õ–û. –õ–ï–ö–°–ò–ö–ê. –§–†–ê–ó–ï–û–õ–û–ì–ò–Ø
- **–°–ª–æ–∂–Ω—ã–π (3)**: –ù–ê–ú–£–ù–ê–ò –°–£–ë–¢–ï–°–¢–ò

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞

```python
# Django shell
python manage.py shell

from core.models import Subject, Topic, Task

# –ü—Ä–æ–≤–µ—Ä–∫–∏
Subject.objects.count()  # 1
Topic.objects.count()    # 4
Task.objects.count()     # ~1159

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
topic = Topic.objects.get(title="–õ–ï–ö–°–ò–ö–ê. –§–†–ê–ó–ï–û–õ–û–ì–ò–Ø")
tests = Task.objects.filter(topic=topic)
print(f"–¢–µ—Å—Ç–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: {tests.count()}")

# –°–ª—É—á–∞–π–Ω—ã–π —Ç–µ—Å—Ç
task = Task.objects.order_by('?').first()
print(f"–í–æ–ø—Ä–æ—Å: {task.question}")
print(f"–í–∞—Ä–∏–∞–Ω—Ç—ã: {task.options}")
print(f"–û—Ç–≤–µ—Ç: {task.correct_answer}")

# –¢–µ—Å—Ç—ã –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
Task.objects.filter(difficulty=1).count()  # –õ–µ–≥–∫–∏–µ
Task.objects.filter(difficulty=2).count()  # –°—Ä–µ–¥–Ω–∏–µ
Task.objects.filter(difficulty=3).count()  # –°–ª–æ–∂–Ω—ã–µ
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. –¢–µ—Å—Ç—ã –±–µ–∑ –æ—Ç–≤–µ—Ç–æ–≤
15 —Ç–µ—Å—Ç–æ–≤ –±—É–¥—É—Ç –ø—Ä–æ–ø—É—â–µ–Ω—ã (ID: 52, 81, 203, 234, 359, 390, 515, 546, 671, 702, 827, 858)

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ options
- –í—Å–µ–≥–¥–∞ JSON –æ–±—ä–µ–∫—Ç —Å –∫–ª—é—á–∞–º–∏ A, B, C, D
- –î–ª—è matching –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–µ "matching"

### 3. –°–≤—è–∑–∏ –≤ –ë–î
```
Subject (1) ‚îÄ‚îÄ‚Üí Topics (N)
   ‚Üì                ‚Üì
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚Üí Tasks ‚Üê‚îÄ‚îÄ‚îò
```

### 4. –£—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- `1` - –õ–µ–≥–∫–∏–π (–±–∞–∑–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã)
- `2` - –°—Ä–µ–¥–Ω–∏–π (–æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—è)
- `3` - –°–ª–æ–∂–Ω—ã–π (–ø—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤)

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "No module named 'hushyor'"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DJANGO_SETTINGS_MODULE
export DJANGO_SETTINGS_MODULE=hushyor.settings
```

### –û—à–∏–±–∫–∞: "Subject matching query does not exist"
```python
# –°–æ–∑–¥–∞–π—Ç–µ Subject –≤—Ä—É—á–Ω—É—é
from core.models import Subject
Subject.objects.create(title="–ó–∞–±–æ–Ω–∏ —Ç–æ“∑–∏–∫”£", icon="üìö", color="#4CAF50")
```

### –û—à–∏–±–∫–∞: "Duplicate entry"
```python
# –û—á–∏—Å—Ç–∏—Ç–µ –ë–î –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∏–º–ø–æ—Ä—Ç–æ–º
Task.objects.all().delete()
Topic.objects.all().delete()
Subject.objects.filter(title="–ó–∞–±–æ–Ω–∏ —Ç–æ“∑–∏–∫”£").delete()
```

## üìù –ü—Ä–∏–º–µ—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```python
Task {
    id: 1,
    subject: Subject("–ó–∞–±–æ–Ω–∏ —Ç–æ“∑–∏–∫”£"),
    topic: Topic("–°–ê–í–û–õ–£ –ú–ê–°–™–ê–õ–ê“≤–û –ë–û –ò–ù–¢–ò–•–û–ë–ò –Ø–ö “∂–ê–í–û–ë–ò –î–£–†–£–°–¢"),
    question: "–î–∞—Ä –∫–∞–¥–æ–º –∫–∞–ª–∏–º–∞ –∑–∞–¥–∞ –¥–∞—Ä “≥–∏“∑–æ–∏ –∞–≤–≤–∞–ª –º–µ–æ—è–¥?",
    options: {
        "A": "—Å–∞“≥—Ä–æ",
        "B": "–∏–º—Ä”Ø–∑",
        "C": "–±–µ—Ä—É–Ω",
        "D": "—Å”Ø–∑–∞–Ω"
    },
    correct_answer: "D",
    difficulty: 1,
    order: 1
}
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ Django Admin
2. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ API endpoints –¥–ª—è —Ç–µ—Å—Ç–æ–≤
3. ‚úÖ –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ª–æ–≥–∏–∫—É –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
4. ‚úÖ –î–æ–±–∞–≤—å—Ç–µ —Å–∏—Å—Ç–µ–º—É –±–∞–ª–ª–æ–≤ —á–µ—Ä–µ–∑ TaskAttempt

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–§–∞–π–ª—ã –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞:
- `test_database_clean.json` - –¢–µ—Å—Ç—ã
- `answer_keys.json` - –û—Ç–≤–µ—Ç—ã
- `import_to_django.py` - –°–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- ‚úÖ Django –∑–∞–ø—É—â–µ–Ω
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã: `python manage.py migrate`
- ‚úÖ –ú–æ–¥–µ–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ `core/models.py`
- ‚úÖ –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
